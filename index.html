<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù‡ÙŠÙƒÙ„ ÙˆØ§Ù„Ø¯Ø¹Ø§Ù…Ø© (Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©)</title>
    <!-- ØªØ­Ù…ÙŠÙ„ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Ø®Ø· Ø¹Ø±Ø¨ÙŠ Ø¬Ù…ÙŠÙ„ */
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f7f7f7;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            width: 95%;
            max-width: 768px;
        }
        .card {
            background-color: white;
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        .question-option {
            cursor: pointer;
            border: 2px solid #e5e7eb;
            transition: all 0.2s;
        }
        .question-option:hover {
            border-color: #a8a8a8;
            background-color: #f3f4f6;
        }
        .question-option.selected {
            border-color: #2563eb;
            background-color: #eff6ff;
        }
        /* ØªØµÙ…ÙŠÙ… Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© */
        #certificate-request {
            background: linear-gradient(135deg, #e0f2fe 0%, #bfdbfe 100%); /* Light blue gradient */
            border: 5px solid #3b82f6; /* Blue border */
            padding: 3rem;
            text-align: center;
            border-radius: 1rem;
            position: relative;
        }
        .certificate-icon {
            font-size: 4rem;
            color: #1d4ed8;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="bg-gray-100 p-4">

    <div class="container mx-auto">
        <div id="quiz-container" class="card">
            <p id="loading-status" class="text-center text-gray-500">Ø¬Ø§Ø±ÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø§ØªØµØ§Ù„...</p>
        </div>
        <p id="storageStatus" class="text-xs text-gray-500 mt-2 text-center">ÙŠØªÙ… Ø­ÙØ¸ Ù†ØªÙŠØ¬Ø© Ø§Ø®ØªØ¨Ø§Ø±Ùƒ Ø¨Ø£Ù…Ø§Ù† (Ù„ØºØ±Ø¶ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©).</p>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, onSnapshot, collection, query, getDocs, limit, orderBy, serverTimestamp, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // ************** Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆÙ‚ÙŠÙ… Firebase Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© **************
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        // Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ù„Ù„Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ)
        const PUBLIC_RESULTS_COLLECTION = `artifacts/${appId}/public/data/quiz_results`;

        let db;
        let auth;
        let userId = null;
        let isAuthReady = false;

        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let userName = '';
        let userPhone = '';
        let currentResultDocId = null; // Ø³ÙŠØªÙ… ØªØ¹ÙŠÙŠÙ†Ù‡ ÙƒÙ…Ø¹Ø±Ù ÙˆØ«ÙŠÙ‚Ø© Firestore

        const quizContainer = document.getElementById('quiz-container');

        // ************** ØªÙ‡ÙŠØ¦Ø© Firebase ÙˆØ§Ù„Ù…ØµØ§Ø¯Ù‚Ø© **************
        const initializeFirebase = async () => {
            try {
                if (Object.keys(firebaseConfig).length === 0) {
                    throw new Error("Firebase config is missing.");
                }

                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                
                // ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„ØªØµØ­ÙŠØ­ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø³Ø¬Ù„Ø§Øª
                setLogLevel('debug'); 

                // Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        isAuthReady = true;
                        console.log("Authenticated successfully. User ID:", userId);
                        renderEntryForm();
                    } else {
                        console.error("Authentication failed or logged out.");
                        renderEntryForm(false);
                    }
                });

            } catch (e) {
                console.error("Firebase Initialization Error:", e);
                document.getElementById('loading-status').textContent = `ÙØ´Ù„ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø§ØªØµØ§Ù„: ${e.message}.`;
                renderEntryForm(false);
            }
        };

        // ************** Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ù…Ø®ØµØµØ© **************
        const displayMessage = (title, message) => {
            const existingMessage = document.getElementById('simple-message-box');
            if (existingMessage) existingMessage.remove();

            const messageBox = document.createElement('div');
            messageBox.id = 'simple-message-box';
            messageBox.className = 'fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50';
            messageBox.innerHTML = `
                <div class="bg-white p-6 rounded-xl shadow-2xl w-80 text-center">
                    <h3 class="text-xl font-bold mb-4 text-red-600">${title}</h3>
                    <p class="text-gray-700 mb-6">${message}</p>
                    <button class="bg-blue-600 text-white py-2 px-4 rounded-full" onclick="document.getElementById('simple-message-box').remove()">Ø¥ØºÙ„Ø§Ù‚</button>
                </div>
            `;
            document.body.appendChild(messageBox);
        };
        
        // ************** Ø¹Ù…Ù„ÙŠØ§Øª Firestore **************
        const saveResultToFirestore = async (data) => {
            if (!isAuthReady || !db || !currentResultDocId) {
                console.error("Firestore not ready or Document ID missing for save.");
                return;
            }
            try {
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… doc() Ù…Ø¹ Ù…Ø¹Ø±Ù Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© Ø§Ù„Ø°ÙŠ ØªÙ… ØªÙˆÙ„ÙŠØ¯Ù‡ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
                const resultRef = doc(db, PUBLIC_RESULTS_COLLECTION, currentResultDocId);
                
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… setDoc() Ù…Ø¹ merge: true Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ùˆ Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
                await setDoc(resultRef, { 
                    ...data, 
                    userId: userId,
                    timestamp: serverTimestamp() // Ø¥Ø¶Ø§ÙØ© Ø®ØªÙ… Ø²Ù…Ù†ÙŠ Ù„Ù„Ø®Ø§Ø¯Ù…
                }, { merge: true });
                
                console.log("Quiz result saved/updated in Firestore:", currentResultDocId);
            } catch (e) {
                console.error("Error writing to Firestore:", e);
                // Ù„Ø§ Ù†Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø£Ù† Ø§Ù„Ø­ÙØ¸ Ù‡Ù†Ø§ Ø«Ø§Ù†ÙˆÙŠ Ù„Ù„Ù…ØªØ·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
            }
        };


        // ************** Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (Ù†ÙØ³ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©) **************
        const questions = [
            {
                questionNumber: 1,
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¯Ù…Ø§Øº ÙÙŠ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø­ÙˆØ±ÙŠØŸ",
                answerOptions: [
                    { text: "Ø§Ù„Ù‚ÙØµ Ø§Ù„ØµØ¯Ø±ÙŠ", isCorrect: false, rationale: "Ø§Ù„Ù‚ÙØµ Ø§Ù„ØµØ¯Ø±ÙŠ ÙŠØ­Ù…ÙŠ Ø§Ù„Ù‚Ù„Ø¨ ÙˆØ§Ù„Ø±Ø¦ØªÙŠÙ†." },
                    { text: "Ø§Ù„Ø¬Ù…Ø¬Ù…Ø©", isCorrect: true, rationale: "Ø§Ù„Ø¬Ù…Ø¬Ù…Ø©ØŒ ÙˆØªØ­Ø¯ÙŠØ¯Ø§Ù‹ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ù…Ø®ÙŠ Ù…Ù†Ù‡Ø§ØŒ Ù‡Ùˆ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø¹Ù† Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¯Ù…Ø§Øº." },
                    { text: "Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ", isCorrect: false, rationale: "Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ ÙŠØ­Ù…ÙŠ Ø§Ù„Ø­Ø¨Ù„ Ø§Ù„Ø´ÙˆÙƒÙŠ ÙˆÙŠÙˆÙØ± Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ù„Ù„Ø¬Ø³Ù…." },
                    { text: "Ø¹Ø¸Ø§Ù… Ø§Ù„Ø­ÙˆØ¶", isCorrect: false, rationale: "Ø¹Ø¸Ø§Ù… Ø§Ù„Ø­ÙˆØ¶ ØªÙ†ØªÙ…ÙŠ Ù„Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø·Ø±ÙÙŠ ÙˆØªØ­Ù…ÙŠ Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ø­ÙˆØ¶." }
                ],
                hint: "ÙÙƒØ± ÙÙŠ Ø§Ù„Ø¹Ø¶Ùˆ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¬Ù…Ø¬Ù…Ø© Ù…Ø¨Ø§Ø´Ø±Ø©."
            },
            {
                questionNumber: 2,
                question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„ÙÙ‚Ø±Ø§Øª Ø§Ù„Ù…ÙƒÙˆÙ†Ø© Ù„Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ ÙÙŠ Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ø§Ù„Ø¨Ø§Ù„Øº (ÙÙ‚Ø±Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙˆÙ…Ù„ØªØ­Ù…Ø©)ØŸ",
                answerOptions: [
                    { text: "24 ÙÙ‚Ø±Ø©", isCorrect: false, rationale: "Ù‡Ø°Ø§ Ù‡Ùˆ Ø¹Ø¯Ø¯ Ø§Ù„ÙÙ‚Ø±Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙ‚Ø· (Ø§Ù„Ø¹Ù†Ù‚ÙŠØ©ØŒ Ø§Ù„ØµØ¯Ø±ÙŠØ©ØŒ ÙˆØ§Ù„Ù‚Ø·Ù†ÙŠØ©)." },
                    { text: "26 ÙÙ‚Ø±Ø©", isCorrect: false, rationale: "Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø¯Ø¯ Ù†Ø§ØªØ¬ Ø¹Ù† Ø¯Ù…Ø¬ Ø§Ù„Ø¹Ø¬Ø² ÙˆØ§Ù„ÙÙ‚Ø±Ø§Øª Ø§Ù„Ø¹ØµØ¹ØµÙŠØ© Ù…Ø¹ Ø§Ù„ÙÙ‚Ø±Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª ØºÙŠØ± Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©." },
                    { text: "33 ÙÙ‚Ø±Ø©", isCorrect: true, rationale: "ÙŠØªÙƒÙˆÙ† Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ Ù…Ù† 33 ÙÙ‚Ø±Ø© (7 Ø¹Ù†Ù‚ÙŠØ©ØŒ 12 ØµØ¯Ø±ÙŠØ©ØŒ 5 Ù‚Ø·Ù†ÙŠØ©ØŒ 5 Ø¹Ø¬Ø²ÙŠØ© Ù…Ù„ØªØ­Ù…Ø©ØŒ 4 Ø¹ØµØ¹ØµÙŠØ© Ù…Ù„ØªØ­Ù…Ø©)." },
                    { text: "12 ÙÙ‚Ø±Ø©", isCorrect: false, rationale: "Ù‡Ø°Ø§ Ù‡Ùˆ Ø¹Ø¯Ø¯ Ø§Ù„ÙÙ‚Ø±Ø§Øª Ø§Ù„ØµØ¯Ø±ÙŠØ© ÙÙ‚Ø·." }
                ],
                hint: "Ø§Ù„Ø¹Ø¯Ø¯ ÙŠØ´Ù…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª: Ø§Ù„Ø¹Ù†Ù‚ÙŠØ©ØŒ Ø§Ù„ØµØ¯Ø±ÙŠØ©ØŒ Ø§Ù„Ù‚Ø·Ù†ÙŠØ©ØŒ Ø§Ù„Ø¹Ø¬Ø²ÙŠØ©ØŒ ÙˆØ§Ù„Ø¹ØµØ¹ØµÙŠØ©."
            },
            {
                questionNumber: 3,
                question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ø¶Ù„ÙˆØ¹ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© (Ø§Ù„Ù…ØªØµÙ„Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¹Ø¸Ù…Ø© Ø§Ù„Ù‚Øµ) ÙÙŠ Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ØŸ",
                answerOptions: [
                    { text: "3 Ø£Ø²ÙˆØ§Ø¬", isCorrect: false, rationale: "Ù‡Ø°Ø§ Ù‡Ùˆ Ø¹Ø¯Ø¯ Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ø¶Ù„ÙˆØ¹ Ø§Ù„Ø¹Ø§Ø¦Ù…Ø©." },
                    { text: "7 Ø£Ø²ÙˆØ§Ø¬", isCorrect: true, rationale: "Ø§Ù„Ø¶Ù„ÙˆØ¹ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù‡ÙŠ Ø§Ù„Ø³Ø¨Ø¹Ø© Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø§Ù„ØªÙŠ ØªØªØµÙ„ Ø¨Ø¹Ø¸Ù…Ø© Ø§Ù„Ù‚Øµ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù† Ø·Ø±ÙŠÙ‚ ØºØ¶Ø§Ø±ÙŠÙÙ‡Ø§." },
                    { text: "10 Ø£Ø²ÙˆØ§Ø¬", isCorrect: false, rationale: "Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø¯Ø¯ Ù„Ø§ ÙŠÙ…Ø«Ù„ Ø£ÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ø­Ø¯Ø¯Ø© Ù…Ù† Ø§Ù„Ø¶Ù„ÙˆØ¹." },
                    { text: "12 Ø²ÙˆØ¬Ø§Ù‹", isCorrect: false, rationale: "Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„ÙŠ Ù„Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ø¶Ù„ÙˆØ¹ ÙÙŠ Ø§Ù„Ù‚ÙØµ Ø§Ù„ØµØ¯Ø±ÙŠ." }
                ],
                hint: "ØªØ°ÙƒØ± Ø£Ù† Ø§Ù„Ø¶Ù„ÙˆØ¹ ØªØµÙ†Ù Ø¥Ù„Ù‰ Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ ÙƒØ§Ø°Ø¨Ø©ØŒ ÙˆØ¹Ø§Ø¦Ù…Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§ØªØµØ§Ù„Ù‡Ø§ Ø¨Ø¹Ø¸Ù…Ø© Ø§Ù„Ù‚Øµ."
            },
            {
                questionNumber: 4,
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ© ÙÙŠ Ø§Ù„Ù†Ø¨Ø§ØªØŸ",
                answerOptions: [
                    { text: "ØªØ±Ø³ÙŠØ¨ Ù…ÙˆØ§Ø¯ ØµÙ„Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø¯Ø± Ø§Ù„Ø®Ù„ÙˆÙŠØ©", isCorrect: false, rationale: "Ù‡Ø°Ø§ ÙŠØµÙ Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ØªØ±ÙƒÙŠØ¨ÙŠØ©ØŒ Ù…Ø«Ù„ ØªØ±Ø³ÙŠØ¨ Ø§Ù„Ø³Ù„ÙŠÙ„ÙˆØ² Ø£Ùˆ Ø§Ù„Ù„Ø¬Ù†ÙŠÙ†." },
                    { text: "Ø§Ù…ØªÙ„Ø§Ø¡ Ø§Ù„Ø®Ù„ÙŠØ© Ø¨Ø§Ù„Ù…Ø§Ø¡ ÙˆØ²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„ÙØ¬ÙˆØ© Ø§Ù„Ø¹ØµØ§Ø±ÙŠØ©", isCorrect: true, rationale: "Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø§Ø¡ Ù„Ù„Ø®Ù„ÙŠØ© Ø¨Ø§Ù„Ø®Ø§ØµÙŠØ© Ø§Ù„Ø£Ø³Ù…ÙˆØ²ÙŠØ© Ù…Ù…Ø§ ÙŠØ³Ø¨Ø¨ Ø¶ØºØ·Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø¯Ø§Ø± Ø§Ù„Ø®Ù„ÙˆÙŠ." },
                    { text: "ØªÙƒÙˆÙŠÙ† Ø£Ù†Ø³Ø¬Ø© ØµÙ„Ø¨Ø© Ù…Ø«Ù„ Ø§Ù„Ø£Ù„ÙŠØ§Ù Ø§Ù„ØµØ®Ø±ÙŠØ©", isCorrect: false, rationale: "Ù‡Ø°Ù‡ Ù†ØªÙŠØ¬Ø© Ù„Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ØªØ±ÙƒÙŠØ¨ÙŠØ©." },
                    { text: "Ù†Ù…Ùˆ Ø§Ù„Ø³Ø§Ù‚ Ø¨Ø´ÙƒÙ„ Ø¹Ù…ÙˆØ¯ÙŠ Ù„Ù…Ù‚Ø§ÙˆÙ…Ø© Ø§Ù„Ø±ÙŠØ§Ø­", isCorrect: false, rationale: "Ù‡Ø°Ø§ ÙˆØµÙ Ù„Ù„Ù†Ù…ÙˆØŒ ÙˆÙ„ÙŠØ³ Ù„Ù„Ø¢Ù„ÙŠØ© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©." }
                ],
                hint: "ØªØ°ÙƒØ± Ø¯ÙˆØ± Ø§Ù„Ù…Ø§Ø¡ ÙˆØ§Ù„Ø®Ø§ØµÙŠØ© Ø§Ù„Ø£Ø³Ù…ÙˆØ²ÙŠØ© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©."
            },
            {
                questionNumber: 5,
                question: "Ø£ÙŠ Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªØ§Ù„ÙŠØ© ØªÙØ³ØªØ®Ø¯Ù… Ù„ØªÙ‚ÙˆÙŠØ© Ø¬Ø¯Ø± Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ù†Ø¨Ø§ØªÙŠØ© Ø¨Ø´ÙƒÙ„ Ø¯Ø§Ø¦Ù…ØŒ Ù…Ù…Ø§ ÙŠØ³Ø§Ù‡Ù… ÙÙŠ Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ØªØ±ÙƒÙŠØ¨ÙŠØ©ØŸ",
                answerOptions: [
                    { text: "Ø§Ù„Ù…Ø§Ø¡", isCorrect: false, rationale: "Ø§Ù„Ù…Ø§Ø¡ Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ© Ø§Ù„Ù…Ø¤Ù‚ØªØ©." },
                    { text: "Ø§Ù„Ø£Ù…Ù„Ø§Ø­ Ø§Ù„Ù…Ø¹Ø¯Ù†ÙŠØ©", isCorrect: false, rationale: "Ø§Ù„Ø£Ù…Ù„Ø§Ø­ ØªØ³Ø§Ø¹Ø¯ ÙÙŠ Ø³Ø­Ø¨ Ø§Ù„Ù…Ø§Ø¡ Ø£Ø³Ù…ÙˆØ²ÙŠØ§Ù‹ØŒ Ù„ÙƒÙ†Ù‡Ø§ Ù„ÙŠØ³Øª Ù…Ø§Ø¯Ø© ØªØ±Ø³ÙŠØ¨ÙŠØ© Ù„Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ØªØ±ÙƒÙŠØ¨ÙŠØ©." },
                    { text: "Ø§Ù„Ù„Ø¬Ù†ÙŠÙ† (Lignin) ÙˆØ§Ù„Ø³Ù„ÙŠÙ„ÙˆØ² (Cellulose)", isCorrect: true, rationale: "ÙŠØªÙ… ØªØ±Ø³ÙŠØ¨ Ø§Ù„Ù„Ø¬Ù†ÙŠÙ† ÙˆØ§Ù„Ø³Ù„ÙŠÙ„ÙˆØ² Ù„ØªÙ‚ÙˆÙŠØ© Ø§Ù„Ø¬Ø¯Ø± Ø§Ù„Ø®Ù„ÙˆÙŠØ© ÙÙŠ Ø§Ù„Ø£Ù†Ø³Ø¬Ø© Ù…Ø«Ù„ Ø§Ù„Ø£Ù„ÙŠØ§Ù ÙˆØ§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø­Ø¬Ø±ÙŠØ©ØŒ Ù…Ù…Ø§ ÙŠÙˆÙØ± Ø¯Ø¹Ø§Ù…Ø© ØªØ±ÙƒÙŠØ¨ÙŠØ© Ø¯Ø§Ø¦Ù…Ø©." },
                    { text: "Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†Ø§Øª", isCorrect: false, rationale: "Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†Ø§Øª ØªØ¯Ø®Ù„ ÙÙŠ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø®Ù„ÙŠØ© ÙˆÙ„Ø§ ØªØ³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯Ø©Ù‹ Ù„Ù„ØªØ±Ø³ÙŠØ¨ Ø§Ù„Ù‡ÙŠÙƒÙ„ÙŠ Ù„Ù„Ø¯Ø¹Ø§Ù…Ø©." }
                ],
                hint: "Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù‡ÙŠ Ø§Ù„ØªÙŠ ØªØ²ÙŠØ¯ Ù…Ù† Ø³Ù…Ùƒ ÙˆÙ‚ÙˆØ© Ø§Ù„Ø¬Ø¯Ø± Ø§Ù„Ø®Ù„ÙˆÙŠØ© ÙÙŠ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ù…ÙŠØªØ© Ø£Ùˆ Ø§Ù„Ù†Ø§Ø¶Ø¬Ø©."
            },
            {
                questionNumber: 6,
                question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø£ÙƒØ«Ø± ÙˆØ¶ÙˆØ­Ø§Ù‹ Ù„ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ù†Ø¨Ø§Øª Ù„Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©ØŸ",
                answerOptions: [
                    { text: "ØªØ­ÙˆÙ„ Ù„ÙˆÙ† Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ Ø¥Ù„Ù‰ Ø§Ù„Ø£ØµÙØ±Ø§Ø±", isCorrect: false, rationale: "Ø§ØµÙØ±Ø§Ø± Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ Ø¹Ø§Ø¯Ø©Ù‹ Ù…Ø§ ÙŠØ±ØªØ¨Ø· Ø¨Ù†Ù‚Øµ Ø§Ù„Ù…ØºØ°ÙŠØ§Øª Ø£Ùˆ Ø§Ù„ÙƒÙ„ÙˆØ±ÙˆÙÙŠÙ„." },
                    { text: "Ø°Ø¨ÙˆÙ„ ÙˆØ³Ù‚ÙˆØ· Ø§Ù„Ø£ÙˆØ±Ø§Ù‚", isCorrect: true, rationale: "Ø§Ù„Ø°Ø¨ÙˆÙ„ Ù†Ø§ØªØ¬ Ø¹Ù† ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ù„Ù„Ù…Ø§Ø¡ ÙˆÙ†Ù‚Øµ Ø¶ØºØ· Ø§Ù„Ø§Ù…ØªÙ„Ø§Ø¡ØŒ Ù…Ù…Ø§ ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¯Ø¹Ø§Ù…Ù‡ Ø§Ù„Ù…Ø¤Ù‚ØªØ©." },
                    { text: "Ø²ÙŠØ§Ø¯Ø© Ø³Ù…Ùƒ Ø§Ù„Ø¬Ø¯Ø§Ø± Ø§Ù„Ø®Ù„ÙˆÙŠ", isCorrect: false, rationale: "Ù‡Ø°Ø§ ÙŠØ­Ø¯Ø« Ù†ØªÙŠØ¬Ø© Ù„Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ØªØ±ÙƒÙŠØ¨ÙŠØ©." },
                    { text: "ØªÙˆÙ‚Ù Ù†Ù…Ùˆ Ø§Ù„Ø¬Ø°ÙˆØ±", isCorrect: false, rationale: "ØªÙˆÙ‚Ù Ù†Ù…Ùˆ Ø§Ù„Ø¬Ø°ÙˆØ± Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø¨Ø³Ø¨Ø¨ Ø¹ÙˆØ§Ù…Ù„ Ø£Ø®Ø±Ù‰ ÙƒØ§Ù„Ø¬ÙØ§Ù Ø§Ù„Ø´Ø¯ÙŠØ¯ Ø£Ùˆ Ù†Ù‚Øµ Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†." }
                ],
                hint: "Ù„Ø§Ø­Ø¸ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¨Ø§Øª Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ÙŠØªÙ… Ø±ÙŠÙ‡ Ù„ÙØªØ±Ø© Ø·ÙˆÙŠÙ„Ø©."
            },
            {
                questionNumber: 7,
                question: "Ù…Ø§ Ù‡Ùˆ Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ØªÙŠ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ÙˆØ¬ÙˆØ¯ Ø§Ù„ÙƒÙŠÙˆØªÙŠÙ† Ø¹Ù„Ù‰ Ø¬Ø¯Ø± Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø¨Ø´Ø±Ø© ÙÙŠ Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ØŸ",
                answerOptions: [
                    { text: "Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ© ÙÙ‚Ø·", isCorrect: false, rationale: "Ø§Ù„ÙƒÙŠÙˆØªÙŠÙ† ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø§Ø¡ Ø§Ù„Ø°ÙŠ Ù‡Ùˆ Ø£Ø³Ø§Ø³ Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©ØŒ Ù„ÙƒÙ† ØªØ±Ø³ÙŠØ¨Ù‡ ÙŠØ¹ØªØ¨Ø± Ø¯Ø¹Ø§Ù…Ø© ØªØ±ÙƒÙŠØ¨ÙŠØ©." },
                    { text: "Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ØªØ±ÙƒÙŠØ¨ÙŠØ© ÙÙ‚Ø·", isCorrect: false, rationale: "ØªØ±Ø³ÙŠØ¨ Ø§Ù„ÙƒÙŠÙˆØªÙŠÙ† Ù‡Ùˆ Ø¯Ø¹Ø§Ù…Ø© ØªØ±ÙƒÙŠØ¨ÙŠØ©ØŒ Ù„ÙƒÙ† Ø¯ÙˆØ±Ù‡ ÙŠØ®Ø¯Ù… Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ© Ø¨Ù…Ù†Ø¹ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ù…Ø§Ø¡." },
                    { text: "ÙƒÙ„Ø§Ù‡Ù…Ø§ (Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ© ÙˆØ§Ù„ØªØ±ÙƒÙŠØ¨ÙŠØ©)", isCorrect: true, rationale: "ØªØ±Ø³ÙŠØ¨ Ø§Ù„ÙƒÙŠÙˆØªÙŠÙ† Ù‡Ùˆ Ø¯Ø¹Ø§Ù…Ø© ØªØ±ÙƒÙŠØ¨ÙŠØ©ØŒ ÙˆÙ„ÙƒÙ†Ù‡ ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ù…Ù†Ø¹ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ù…Ø§Ø¡ØŒ ÙˆØ¨Ø§Ù„ØªØ§Ù„ÙŠ ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©." },
                    { text: "Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„Ù…Ø¤Ù‚ØªØ©", isCorrect: false, rationale: "Ù‡Ø°Ù‡ Ù„ÙŠØ³Øª Ù†ÙˆØ¹Ø§Ù‹ Ø±Ø³Ù…ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„Ù†Ø¨Ø§ØªÙŠØ©." }
                ],
                hint: "ÙÙƒØ± ÙÙŠ ÙˆØ¸ÙŠÙØ© Ø§Ù„ÙƒÙŠÙˆØªÙŠÙ† Ø¹Ù„Ù‰ Ø³Ø·Ø­ Ø§Ù„ÙˆØ±Ù‚Ø© ÙˆØ¹Ù„Ø§Ù‚ØªÙ‡ Ø¨Ø§Ù„Ù…Ø§Ø¡ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø®Ù„ÙŠØ©."
            },
            {
                questionNumber: 8,
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ Ù„ÙÙ‚Ø±Ø§Øª Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø³ÙÙ„ØŸ",
                answerOptions: [
                    { text: "ØµØ¯Ø±ÙŠØ© - Ø¹Ù†Ù‚ÙŠØ© - Ù‚Ø·Ù†ÙŠØ© - Ø¹Ø¬Ø²ÙŠØ© - Ø¹ØµØ¹ØµÙŠØ©", isCorrect: false, rationale: "Ø§Ù„ØªØ±ØªÙŠØ¨ ØºÙŠØ± ØµØ­ÙŠØ­ØŒ Ø­ÙŠØ« ØªØ¨Ø¯Ø£ Ø¨Ø§Ù„ÙÙ‚Ø±Ø§Øª Ø§Ù„Ø¹Ù†Ù‚ÙŠØ©." },
                    { text: "Ø¹Ù†Ù‚ÙŠØ© - Ù‚Ø·Ù†ÙŠØ© - ØµØ¯Ø±ÙŠØ© - Ø¹Ø¬Ø²ÙŠØ© - Ø¹ØµØ¹ØµÙŠØ©", isCorrect: false, rationale: "Ø§Ù„ØªØ±ØªÙŠØ¨ ØºÙŠØ± ØµØ­ÙŠØ­ØŒ Ø§Ù„ÙÙ‚Ø±Ø§Øª Ø§Ù„ØµØ¯Ø±ÙŠØ© ØªÙ„ÙŠ Ø§Ù„Ø¹Ù†Ù‚ÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø©." },
                    { text: "Ø¹Ù†Ù‚ÙŠØ© - ØµØ¯Ø±ÙŠØ© - Ù‚Ø·Ù†ÙŠØ© - Ø¹Ø¬Ø²ÙŠØ© - Ø¹ØµØ¹ØµÙŠØ©", isCorrect: true, rationale: "Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„ÙÙ‚Ø±Ø§Øª Ù…Ù† Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù†Ù‚ Ù†Ø²ÙˆÙ„Ø§Ù‹ Ø¥Ù„Ù‰ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ." },
                    { text: "Ø¹Ù†Ù‚ÙŠØ© - ØµØ¯Ø±ÙŠØ© - Ø¹Ø¬Ø²ÙŠØ© - Ù‚Ø·Ù†ÙŠØ© - Ø¹ØµØ¹ØµÙŠØ©", isCorrect: false, rationale: "Ø§Ù„ØªØ±ØªÙŠØ¨ ØºÙŠØ± ØµØ­ÙŠØ­ØŒ Ø§Ù„ÙÙ‚Ø±Ø§Øª Ø§Ù„Ù‚Ø·Ù†ÙŠØ© ØªØ³Ø¨Ù‚ Ø§Ù„Ø¹Ø¬Ø²ÙŠØ©." }
                ],
                hint: "Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ ÙŠØ¨Ø¯Ø£ Ø¨ÙÙ‚Ø±Ø§Øª Ø§Ù„Ø¹Ù†Ù‚ ÙˆÙŠÙ„ÙŠÙ‡Ø§ ÙÙ‚Ø±Ø§Øª Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØµØ¯Ø±."
            },
            {
                questionNumber: 9,
                question: "ÙÙŠ Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ØªØ±ÙƒÙŠØ¨ÙŠØ©ØŒ ØªØªØ±Ø³Ø¨ Ù…Ø§Ø¯Ø© Ø§Ù„Ù„Ø¬Ù†ÙŠÙ† Ø¨Ø´ÙƒÙ„ Ø®Ø§Øµ ÙÙŠ Ø¬Ø¯Ø± Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ù„ØªÙ‚ÙˆÙŠØªÙ‡Ø§. Ù…Ø§ Ù†ÙˆØ¹ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø°ÙŠ ÙŠØªÙ…ÙŠØ² Ø¨ØªØ±Ø³ÙŠØ¨ Ø§Ù„Ù„Ø¬Ù†ÙŠÙ† Ø¨Ø´ÙƒÙ„ ÙƒØ¨ÙŠØ±ØŸ",
                answerOptions: [
                    { text: "Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø¨Ø±Ù†Ø´ÙŠÙ…ÙŠØ© (Parenchyma)", isCorrect: false, rationale: "Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø¨Ø±Ù†Ø´ÙŠÙ…ÙŠØ© Ø¹Ø§Ø¯Ø©Ù‹ Ù…Ø§ ØªÙƒÙˆÙ† Ø±Ù‚ÙŠÙ‚Ø© Ø§Ù„Ø¬Ø¯Ø±Ø§Ù† ÙˆØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©." },
                    { text: "Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„ÙƒÙˆÙ„Ù†Ø´ÙŠÙ…ÙŠØ© (Collenchyma)", isCorrect: false, rationale: "Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„ÙƒÙˆÙ„Ù†Ø´ÙŠÙ…ÙŠØ© ØªØ¯Ø¹Ù… Ø¹Ù† Ø·Ø±ÙŠÙ‚ ØªØ±Ø³ÙŠØ¨ Ø§Ù„Ø³Ù„ÙŠÙ„ÙˆØ² ÙÙŠ Ø§Ù„Ø²ÙˆØ§ÙŠØ§ Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù…Ù†ØªØ¸Ù…." },
                    { text: "Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø¥Ø³ÙƒÙ„Ø±Ù†Ø´ÙŠÙ…ÙŠØ© (Sclerenchyma)", isCorrect: true, rationale: "Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø¥Ø³ÙƒÙ„Ø±Ù†Ø´ÙŠÙ…ÙŠØ© (Ù…Ø«Ù„ Ø§Ù„Ø£Ù„ÙŠØ§Ù ÙˆØ§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø­Ø¬Ø±ÙŠØ©) ØªØªÙ…ÙŠØ² Ø¨ØªØ±Ø³ÙŠØ¨ Ø§Ù„Ù„Ø¬Ù†ÙŠÙ†ØŒ Ù…Ù…Ø§ ÙŠØ¬Ø¹Ù„Ù‡Ø§ Ù‚ÙˆÙŠØ© ÙˆØµÙ„Ø¨Ø© ÙˆÙ…ÙŠØªØ© ÙÙŠ Ø§Ù„Ø¹Ø§Ø¯Ø©." },
                    { text: "Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ù…ÙŠØ±Ø³ØªÙŠÙ…ÙŠØ© (Meristematic)", isCorrect: false, rationale: "Ù‡Ø°Ù‡ Ø®Ù„Ø§ÙŠØ§ Ø§Ù†Ù‚Ø³Ø§Ù…ÙŠØ© ÙˆÙ„ÙŠØ³Øª Ù…Ø®ØµØµØ© Ù„Ù„Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„ØªØ±ÙƒÙŠØ¨ÙŠØ©." }
                ],
                hint: "Ù‡Ø°Ù‡ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ ØºØ§Ù„Ø¨Ù‹Ø§ Ù…Ø§ ØªÙƒÙˆÙ† Ù…ÙŠØªØ© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø¶Ø¬ ÙˆØªÙˆØ¬Ø¯ ÙÙŠ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ø£ÙƒØ«Ø± ØµÙ„Ø§Ø¨Ø© Ù…Ù† Ø§Ù„Ù†Ø¨Ø§Øª."
            },
            {
                questionNumber: 10,
                question: "Ø£ÙŠ Ù…Ù…Ø§ ÙŠÙ„ÙŠ Ù„Ø§ ÙŠØ¹ØªØ¨Ø± Ù…Ù† ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù‚ÙØµ Ø§Ù„ØµØ¯Ø±ÙŠØŸ",
                answerOptions: [
                    { text: "Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù‚Ù„Ø¨ ÙˆØ§Ù„Ø±Ø¦ØªÙŠÙ†", isCorrect: false, rationale: "Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ù‚ÙØµ Ø§Ù„ØµØ¯Ø±ÙŠ." },
                    { text: "Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªÙ†ÙØ³", isCorrect: false, rationale: "Ø­Ø±ÙƒØ© Ø§Ù„Ø¶Ù„ÙˆØ¹ ÙˆØºØ¶Ø§Ø±ÙŠÙÙ‡Ø§ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ†ÙØ³ ØªØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©." },
                    { text: "Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ ØªØµÙ†ÙŠØ¹ Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø¯Ù…", isCorrect: false, rationale: "Ø§Ù„Ù†Ø®Ø§Ø¹ Ø§Ù„Ø¹Ø¸Ù…ÙŠ ÙÙŠ Ø§Ù„Ø¶Ù„ÙˆØ¹ ÙŠØ³Ø§Ù‡Ù… ÙÙŠ ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¯Ù…." },
                    { text: "Ø¯Ø¹Ø§Ù…Ø© Ø§Ù„Ø±Ø£Ø³ ÙˆØªØ­Ù…Ù„ ÙˆØ²Ù†Ù‡", isCorrect: true, rationale: "Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„ÙÙ‚Ø±Ø§Øª Ø§Ù„Ø¹Ù†Ù‚ÙŠØ© ÙÙŠ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ." }
                ],
                hint: "ÙÙƒØ± ÙÙŠ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„ØªÙŠ ØªÙ‚Ø¹ ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØµØ¯Ø±ØŒ ÙˆØ§Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„ØªÙŠ ØªÙ‚Ø¹ ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù†Ù‚ ÙˆØ§Ù„Ø±Ø£Ø³."
            }
        ];
        
        // ************** Ø¹Ø±Ø¶ Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª **************
        const renderEntryForm = (isDbReady = true) => {
            quizContainer.innerHTML = `
                <h1 class="text-3xl font-bold text-center text-blue-700 mb-6">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù‡ÙŠÙƒÙ„ ÙˆØ§Ù„Ø¯Ø¹Ø§Ù…Ø©</h1>
                <p class="text-center text-gray-600 mb-8">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© ÙˆØ¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±.</p>

                <div class="space-y-4">
                    <label class="block">
                        <span class="text-gray-700 font-medium">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</span>
                        <input type="text" id="nameInput" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-3 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50" placeholder="Ù…Ø«Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯" required>
                    </label>
                    <label class="block">
                        <span class="text-gray-700 font-medium">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ù…Ù‡Ù… Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©):</span>
                        <input type="tel" id="phoneInput" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-3 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50" placeholder="012XXXXXXXX" pattern="[0-9]*" required>
                    </label>
                </div>

                <div class="mt-8 text-center">
                    <button id="startQuizBtn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-full transition duration-300 shadow-lg">
                        Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                    </button>
                </div>
            `;
            
            document.getElementById('startQuizBtn').addEventListener('click', handleEntryFormSubmit);
        };

        // ************** Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ **************
        const handleEntryFormSubmit = async () => {
            const nameInput = document.getElementById('nameInput');
            const phoneInput = document.getElementById('phoneInput');

            userName = nameInput.value.trim();
            userPhone = phoneInput.value.trim();
            
            if (userName.length < 3 || userPhone.length < 5) {
                displayMessage('Ø®Ø·Ø£', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… ÙƒØ§Ù…Ù„ ÙˆØ±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.');
                return;
            }
            
            // ØªÙ‡ÙŠØ¦Ø© Ù…Ø¹Ø±Ù Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯
            if (isAuthReady && db) {
                 currentResultDocId = doc(collection(db, PUBLIC_RESULTS_COLLECTION)).id; 
            } else {
                 // Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ù†Ø³ØªØ®Ø¯Ù… Ù…Ø¹Ø±Ù Ù…Ø­Ù„ÙŠ Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¹Ø·Ù„
                 currentResultDocId = crypto.randomUUID(); 
            }
            

            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ÙÙŠ Firestore (Ù„Ø§ Ù†Ù†ØªØ¸Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø©)
            const initialData = {
                name: userName,
                phone: userPhone,
                startTime: new Date().toISOString(),
                quizStatus: 'started',
                score: null,
                totalQuestions: questions.length,
                answers: []
            };
            
            saveResultToFirestore(initialData);

            // Ø¹Ø±Ø¶ Ø£ÙˆÙ„ Ø³Ø¤Ø§Ù„
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            renderQuestion(currentQuestionIndex);
        };

        // ************** Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Ù†ÙØ³ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©) **************
        const renderQuestion = (index) => {
            const q = questions[index];
            if (!q) {
                calculateScore();
                return;
            }

            const totalQuestions = questions.length;
            const progress = ((index + 1) / totalQuestions) * 100;

            // ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ onclick="selectAnswer(this, ${index}, ${optIndex})" Ø¨Ù€ event listener
            // Ù„ÙƒÙ† Ù„ØºØ±Ø¶ Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù†Ø·Ø§Ù‚ØŒ Ø³Ù†Ø¹ÙŠØ¯ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ù€ onclick
            let optionsHtml = q.answerOptions.map((option, optIndex) => `
                <div data-index="${optIndex}" class="question-option p-4 rounded-lg border-2 border-gray-300 hover:border-blue-500 cursor-pointer mb-3 transition duration-150 ease-in-out" onclick="window.selectAnswer(this, ${index}, ${optIndex})">
                    <p class="text-gray-800">${option.text}</p>
                </div>
            `).join('');

            quizContainer.innerHTML = `
                <div class="text-sm font-semibold text-blue-600 mb-2">Ø§Ù„Ø³Ø¤Ø§Ù„ ${index + 1} Ù…Ù† ${totalQuestions}</div>
                <div class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                    <div class="bg-blue-600 h-2.5 rounded-full" style="width: ${progress}%"></div>
                </div>

                <h2 class="text-xl font-bold mb-6 text-gray-800">${q.question}</h2>

                <div id="options-container">
                    ${optionsHtml}
                </div>

                <div class="mt-6 flex justify-between items-center">
                    <button id="hintBtn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded-full transition duration-300" onclick="window.showHint(${index})">
                        ØªÙ„Ù…ÙŠØ­
                    </button>
                    <button id="nextBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-full transition duration-300 opacity-50 cursor-not-allowed" disabled onclick="window.moveToNextQuestion()">
                        ${index === totalQuestions - 1 ? 'Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±' : 'Ø§Ù„ØªØ§Ù„ÙŠ'}
                    </button>
                </div>

                <div id="feedback" class="mt-4 p-3 rounded-lg text-center" style="display:none;"></div>
                <div id="hint-display" class="mt-4 p-3 bg-yellow-100 text-yellow-800 rounded-lg text-sm" style="display:none;"></div>
            `;

            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø®ÙŠØ§Ø± Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø¬Ø§Ø¨Ø§Ù‹ Ø³Ø§Ø¨Ù‚Ø§Ù‹ (Ø¥Ø°Ø§ Ø¹Ø§Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø³Ø¤Ø§Ù„)
            if (userAnswers[index] !== undefined) {
                const selectedOption = document.querySelector(`.question-option[data-index="${userAnswers[index].selectedIndex}"]`);
                if (selectedOption) {
                    selectedOption.classList.add('selected');
                }
                document.getElementById('nextBtn').disabled = false;
                document.getElementById('nextBtn').classList.remove('opacity-50', 'cursor-not-allowed');
            }
        };

        // ************** ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© (Ù…ØªØ§Ø­ ÙÙŠ Ù†Ø·Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ù…Ù† HTML) **************
        window.selectAnswer = (element, qIndex, optIndex) => {
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
            const options = element.parentNode.querySelectorAll('.question-option');
            options.forEach(opt => opt.classList.remove('selected'));

            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ
            element.classList.add('selected');

            // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
            const q = questions[qIndex];
            const isCorrect = q.answerOptions[optIndex].isCorrect;
            const rationale = q.answerOptions[optIndex].rationale;

            userAnswers[qIndex] = {
                questionNumber: qIndex + 1,
                selectedIndex: optIndex,
                isCorrect: isCorrect,
                rationale: rationale
            };

            // ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ
            const nextBtn = document.getElementById('nextBtn');
            nextBtn.disabled = false;
            nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');

            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªÙ„Ù…ÙŠØ­ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø¹Ø±ÙˆØ¶Ø§Ù‹
            document.getElementById('hint-display').style.display = 'none';
        };

        // ************** Ø¹Ø±Ø¶ Ø§Ù„ØªÙ„Ù…ÙŠØ­ (Ù…ØªØ§Ø­ ÙÙŠ Ù†Ø·Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©) **************
        window.showHint = (index) => {
            const hintDisplay = document.getElementById('hint-display');
            hintDisplay.textContent = `ØªÙ„Ù…ÙŠØ­: ${questions[index].hint}`;
            hintDisplay.style.display = 'block';
        };

        // ************** Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ (Ù…ØªØ§Ø­ ÙÙŠ Ù†Ø·Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©) **************
        window.moveToNextQuestion = () => {
            if (userAnswers[currentQuestionIndex] === undefined) {
                return;
            }

            currentQuestionIndex++;
            renderQuestion(currentQuestionIndex);
        };

        // ************** Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ­ÙØ¸Ù‡Ø§ **************
        const calculateScore = () => {
            score = userAnswers.filter(a => a.isCorrect).length;
            const totalQuestions = questions.length;
            
            // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ÙÙŠ Firestore
            const finalData = {
                score: score,
                completionTime: new Date().toISOString(),
                quizStatus: 'completed',
                answers: userAnswers.map(a => ({
                    questionNumber: a.questionNumber,
                    isCorrect: a.isCorrect,
                    selectedIndex: a.selectedIndex,
                    rationale: a.rationale
                }))
            };
            
            saveResultToFirestore(finalData);

            renderCertificateRequest(score, totalQuestions);
        };

        // ************** Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø·Ù„Ø¨ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© (Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©) **************
        const renderCertificateRequest = (finalScore, total) => {
            const percentage = Math.round((finalScore / total) * 100);
            const statusMessage = percentage >= 70 ? 
                'Ù…Ù…ØªØ§Ø²! ØªØ³ØªØ­Ù‚ Ø´Ù‡Ø§Ø¯Ø© ØªÙ‚Ø¯ÙŠØ± Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ØªÙ…ÙŠØ².' : 
                'Ø¹Ù…Ù„ Ø¬ÙŠØ¯! Ù†ØªÙŠØ¬ØªÙƒ Ø±Ø§Ø¦Ø¹Ø© ÙˆØªØ³ØªØ­Ù‚ Ø´Ù‡Ø§Ø¯Ø© ØªÙ‚Ø¯ÙŠØ± Ù„Ø¬Ù‡Ø¯Ùƒ.';
            
            // ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ù‚Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ùƒ
            const whatsappNumber = '01208832071'; 
            const whatsappMessage = `Ø£Ù‡Ù„Ø§Ù‹ØŒ Ø£Ù†Ø§ ${userName} ÙˆØ£Ù†Ù‡ÙŠØª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù‡ÙŠÙƒÙ„ ÙˆØ§Ù„Ø¯Ø¹Ø§Ù…Ø©. Ù†ØªÙŠØ¬ØªÙŠ Ù‡ÙŠ ${finalScore}/${total} (${percentage}%). Ø£Ø±Ø¬Ùˆ Ø§Ø³ØªÙ„Ø§Ù… Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙŠ. Ø±Ù‚Ù… Ù‡Ø§ØªÙÙŠ: ${userPhone}`;
            const whatsappLink = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(whatsappMessage)}`;

            quizContainer.innerHTML = `
                <div id="certificate-request" class="w-full mx-auto">
                    <div class="certificate-icon">ğŸ†</div>
                    <h1 class="text-4xl font-extrabold text-gray-800 mt-4 mb-2">ØªÙ‡Ø§Ù†ÙŠÙ†Ø§ ÙŠØ§ ${userName}!</h1>
                    
                    <p class="text-2xl font-bold mb-4 text-blue-700">${statusMessage}</p>

                    <div class="mt-8 mb-8 border-t-2 border-dashed border-blue-400 pt-6">
                        <p class="text-3xl font-extrabold text-gray-800">
                            Ø¯Ø±Ø¬ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:
                            <span class="text-4xl mx-2 text-green-600">${finalScore} / ${total}</span>
                        </p>
                        <p class="text-xl font-medium mt-2">
                            Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©: <span class="text-green-600">${percentage}%</span>
                        </p>
                    </div>

                    <p class="text-xl text-gray-700 mb-6 font-semibold leading-relaxed">
                        Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ ÙˆØ§Ù„Ù…ÙØµÙ…Ù…Ø© Ø¨Ø§Ø³Ù…Ùƒ ÙˆØ¯Ø±Ø¬ØªÙƒØŒ 
                        <span class="text-red-700 font-extrabold">ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„ÙŠÙ†Ø§ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</span> 
                        ØªØªØ¶Ù…Ù† Ø§Ø³Ù…Ùƒ ÙˆØ¯Ø±Ø¬ØªÙƒ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ§Ù„ÙŠ:
                    </p>
                    
                    <a href="${whatsappLink}" target="_blank" class="inline-block bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full transition duration-300 shadow-lg text-lg">
                        <span class="mr-2">&#x27A1;</span> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨: ${whatsappNumber}
                    </a>

                    <p class="text-sm text-gray-500 mt-4">
                        Ø³ÙŠØªÙ… ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø¥Ù„ÙŠÙƒ Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ± Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù†ØªÙŠØ¬Ø©.
                    </p>
                </div>

                <div class="mt-8 text-center space-x-4 space-x-reverse">
                    <button class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-6 rounded-full transition duration-300 shadow-lg" 
                            onclick="window.renderQuizReview('${currentResultDocId}')">
                        Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¥Ø¬Ø§Ø¨Ø§ØªÙŠ
                    </button>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full transition duration-300 shadow-lg" onclick="window.location.reload()">
                        Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯
                    </button>
                </div>
            `;
        };

        // ************** Ø¹Ø±Ø¶ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (Review) Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ù…ØªØ§Ø­ ÙÙŠ Ù†Ø·Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©) **************
        window.renderQuizReview = async (resultId) => {
            if (!resultId) {
                displayMessage('Ø®Ø·Ø£', 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ø±Ù Ù†ØªÙŠØ¬Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©.');
                return;
            }

            let data = null;
            if (isAuthReady && db) {
                 try {
                    const resultRef = doc(db, PUBLIC_RESULTS_COLLECTION, resultId);
                    // Ø§Ø³ØªØ®Ø¯Ø§Ù… getDoc Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙˆØ«ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø©
                    const docSnap = await getDoc(resultRef); 
                    data = docSnap.exists() ? docSnap.data() : null;
                 } catch (e) {
                    console.error("Error loading review from Firestore:", e);
                 }
            } 
            
            // ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ DBØŒ Ù†Ø¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© (Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù„Ø§ ØªØ²Ø§Ù„ Ù…ÙˆØ¬ÙˆØ¯Ø©)
            if (!data) {
                data = {
                    name: userName || 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',
                    score: score,
                    totalQuestions: questions.length,
                    answers: userAnswers,
                };
            }

            if (!data || !data.answers) {
                displayMessage('Ø®Ø·Ø£', 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©.');
                return;
            }

            const answers = data.answers || [];

            let reviewHtml = `
                <h2 class="text-3xl font-bold text-blue-700 mb-6 text-center">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ø®ØªØ¨Ø§Ø± ${data.name || 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'}</h2>
                <p class="text-center text-xl font-medium mb-8">Ø§Ù„Ø¯Ø±Ø¬Ø©: ${data.score} / ${data.totalQuestions}</p>
                <div class="space-y-6">
            `;

            questions.forEach((q, index) => {
                const userAnswer = answers.find(a => a.questionNumber === index + 1);
                const isCorrect = userAnswer ? userAnswer.isCorrect : false;
                const userSelectedOption = userAnswer && userAnswer.selectedIndex !== undefined ? q.answerOptions[userAnswer.selectedIndex] : null;
                const userSelectedText = userSelectedOption ? userSelectedOption.text : 'Ù„Ù… ÙŠØ¬Ø¨';
                const correctAnswerOption = q.answerOptions.find(opt => opt.isCorrect);
                const correctAnswerText = correctAnswerOption ? correctAnswerOption.text : 'ØºÙŠØ± Ù…ØªÙˆÙØ±';
                
                const rationaleText = userAnswer && userAnswer.rationale ? userAnswer.rationale : 'Ù„Ù… ÙŠØªÙ… ØªÙˆÙÙŠØ± Ø´Ø±Ø­ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„.';

                const cardClass = isCorrect ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50';
                const icon = isCorrect ? '&#10004;' : '&#10008;'; // Checkmark or X

                reviewHtml += `
                    <div class="card p-4 border-l-8 ${cardClass}">
                        <div class="flex items-start mb-3">
                            <span class="text-2xl mr-3 font-extrabold ${isCorrect ? 'text-green-600' : 'text-red-600'}">${icon}</span>
                            <p class="text-lg font-semibold text-gray-800">${index + 1}. ${q.question}</p>
                        </div>

                        <p class="mb-2">
                            <span class="font-bold text-gray-600">Ø¥Ø¬Ø§Ø¨ØªÙƒ:</span>
                            <span class="${isCorrect ? 'text-green-600 font-medium' : 'text-red-600 font-medium'}">${userSelectedText}</span>
                        </p>

                        ${!isCorrect ? `
                            <p class="mb-2">
                                <span class="font-bold text-gray-600">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</span>
                                <span class="text-green-600 font-medium">${correctAnswerText}</span>
                            </p>
                        ` : ''}

                        <div class="mt-4 p-3 bg-gray-100 rounded-lg border-r-4 border-gray-400">
                            <p class="font-bold text-gray-700 mb-1">Ø§Ù„Ø´Ø±Ø­:</p>
                            <p class="text-sm text-gray-600">${rationaleText}</p>
                        </div>
                    </div>
                `;
            });

            reviewHtml += `
                </div>
                <div class="mt-8 text-center">
                    <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full transition duration-300 shadow-lg" onclick="window.location.reload()">
                        Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    </button>
                </div>
            `;

            quizContainer.innerHTML = reviewHtml;
        };
        
        // Ø¨Ø¯Ø£ Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', initializeFirebase);
    </script>
</body>
</html>
